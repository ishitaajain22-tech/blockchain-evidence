name: Auto Greet Contributors

on:
  issues:
    types: [opened]
  pull_request_target:
    types: [opened]
  issue_comment:
    types: [created]

permissions:
  issues: write
  pull-requests: write

jobs:
  auto-greet:
    runs-on: ubuntu-latest
    steps:
      - name: Greet Contributors
        uses: actions/github-script@v7
        with:
          script: |
            if (context.eventName === 'issues' && context.payload.action === 'opened') {
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.issue.number,
                body: `ğŸ‘‹ Thank you for taking the time to raise this issue!

We appreciate your contribution to improving the Project **EVID-DGC**. To help us address it effectively, please make sure you follow this: âš ï¸

### ğŸ“‹ Important Guidelines:
- ğŸ“– Follow the issue guidelines: https://github.com/Gooichand/blockchain-evidence/issues/50
- ğŸ“ Fill this form: https://forms.cloud.microsoft/r/0VjHehyNaw
- âœ… Use the issue template mentioned in pinned issue #50

### ğŸ•’ What's Next?
Our team will review your issue shortly. Stay tuned and have a happy contribution! ğŸš€

---
~ Team EVID-DGC ğŸ”`
              });
            }
            
            if (context.eventName === 'pull_request_target' && context.payload.action === 'opened') {
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.pull_request.number,
                body: `ğŸ‰ Thank you for submitting a pull request!

We appreciate the time and effort you've put into contributing to project **EVID-DGC**. To help us review your PR smoothly, please ensure that:

### âœ… PR Checklist:
- [ ] The PR description clearly explains the changes made
- [ ] **Video or image of changes** (ğŸ“¸ **COMPULSORY** if UI/frontend changes are applicable)
- [ ] add related issues are linked (e.g., "Fixes #123")
- [ ] Commit messages are descriptive and follow our guidelines

### ğŸ” Review Process:
Our team will review your PR as soon as possible. Feedback may be provided to ensure consistency with project standards. Collaboration is welcomeâ€”feel free to engage in discussion and iterate on the changes.

Your contribution helps make this project better for everyone! ğŸš€

---
~ Team EVID-DGC ğŸ”`
              });
            }
            
            if (context.eventName === 'issue_comment' && context.payload.action === 'created') {
              const comment = context.payload.comment.body.toLowerCase();
              const keywords = ['assign', 'can i work', 'can i take', 'i would like to work', 'please assign'];
              
              if (keywords.some(keyword => comment.includes(keyword))) {
                await github.rest.issues.createComment({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  issue_number: context.payload.issue.number,
                  body: `ğŸ™Œ Thanks for your interest in working on this issue!

We'd be happy to assign this issue to you soon. Before you start, please make sure to:

### ğŸ“ Pre-Assignment Requirements:
- âœ… Fill this form: https://forms.cloud.microsoft/r/0VjHehyNaw
- ğŸ“‹ Follow proper order and workflow
- ğŸ’¡ **Comment your plan of action** to resolve this issue (required)

### ğŸ¯ Next Steps:
Based on your plan of action, the issue will be assigned to you. If you run into any blockers, feel free to ask questions or request guidance. 

Collaboration is always welcome, and we appreciate your contribution to improving this project! ğŸš€

---
~ Team EVID-DGC ğŸ”`
                });
              }
            }